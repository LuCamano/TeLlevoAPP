<app-encabezado titulo="inicio"></app-encabezado>
<ion-content class="ion-padding">
  
  <ion-text>
    <h1>Bienvenido, {{nombre}}</h1>
    <!-- Aviso de viaje disponible -->
    <ion-item *ngIf="conduciendo || dePasajero" lines="none" color="tertiary" class="viaje-en-curso">
      <ion-label slot="start">Tienes un viaje en curso</ion-label>
      <ion-button slot="end" color="success"
        routerDirection="forward" routerLink="/conducir/adm-viajes">
        Ir al viaje
      </ion-button>
    </ion-item>
    <h4>Viajes disponibles:</h4>
  </ion-text> 

  @for (viaje of viajes; track $index) {
    <ion-card>
      <ion-card-header>
        <ion-card-title>Destino: {{viaje.destino}}</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-list>
          <ion-item>
            <ion-label>Conductor: {{viaje.conductor}}</ion-label>
          </ion-item>
          <ion-item>
            <ion-label>Fecha: {{viaje.fecha | date: 'dd/MM/yyyy HH:mm'}}</ion-label>
          </ion-item>
          <ion-item>
            <ion-label>Costo: {{viaje.precio}}</ion-label>
          </ion-item>
          <ion-item>
            <ion-label>Asientos disponibles: {{viaje.pasajeros ? viaje.asientos - viaje.pasajeros.length : viaje.asientos}}</ion-label>
          </ion-item>
          <ion-item>
            <ion-button (click)="solitcitarViaje(viaje)">Solicitar viaje</ion-button>
          </ion-item>
        </ion-list>
      </ion-card-content>
    </ion-card>
  }
</ion-content>